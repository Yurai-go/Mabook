<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mabook - Smart Recommendation System</title>
    <link href="main.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Segoe+UI&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet" />
</head>
<body>

    <div id="navbar-container"></div>

    <main>
        <div id="hero-container"></div>
        <div id="library-container"></div>
    </main>

    <div id="footer-container"></div>

<script>
    // Function to fetch and insert HTML content
    const loadComponent = (url, elementId) => {
        fetch(url)
            .then(response => response.text())
            .then(data => {
                document.getElementById(elementId).innerHTML = data;
                // Re-initialize the navigation script after loading the navbar
                if (elementId === 'navbar-container') {
                    initializeNavbar();
                }
            })
            .catch(error => console.error('Error loading component:', error));
    };

    // Function to initialize the navbar script
    const initializeNavbar = () => {
        const navLinks = document.querySelectorAll('.nav-links a');
        const capsule = document.querySelector('.nav-links .nav-capsule');
        const activeLink = document.querySelector('.nav-links a.active');

        // Function to move the capsule
        function moveCapsule(target) {
            // Update capsule position and size
            capsule.style.width = `${target.offsetWidth}px`;
            capsule.style.left = `${target.offsetLeft}px`;

            // Update active class for text color
            navLinks.forEach(link => link.classList.remove('active'));
            target.classList.add('active');
        }

        // Initial position on page load
        if (activeLink) {
            moveCapsule(activeLink);
        }

        // Add click listeners to all nav links
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                moveCapsule(e.target);
            });
        });
    };


    document.addEventListener('DOMContentLoaded', () => {
        // Load the components into their containers
        loadComponent('navbar.html', 'navbar-container');
        loadComponent('hero.html', 'hero-container');
        loadComponent('library.html', 'library-container');
        loadComponent('footer.html', 'footer-container');
    });
</script>
</body>
</html>